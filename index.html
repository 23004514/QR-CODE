<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Generator</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            start: '#6a11cb',
                            end: '#2575fc',
                        },
                        secondary: '#f0f2f5',
                        accent: '#e74c3c',
                    },
                    fontFamily: {
                        'sans': ['Inter', 'Segoe UI', 'system-ui', 'sans-serif'],
                    },
                    boxShadow: {
                        'card': '0 10px 30px rgba(0, 0, 0, 0.15)',
                        'card-hover': '0 15px 40px rgba(0, 0, 0, 0.2)',
                        'inner-light': 'inset 0 2px 4px 0 rgba(255, 255, 255, 0.1)',
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                        'pulse-glow': 'pulseGlow 2s infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(10px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        pulseGlow: {
                            '0%, 100%': { boxShadow: '0 0 5px rgba(106, 17, 203, 0.5)' },
                            '50%': { boxShadow: '0 0 20px rgba(106, 17, 203, 0.8)' },
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Custom styles for enhancements */
        .gradient-bg {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .qr-code-container {
            transition: all 0.3s ease;
        }
        
        .qr-code-container:hover {
            transform: translateY(-5px);
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, #6a11cb, #2575fc);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(to bottom, #5a0db9, #1c68e8);
        }
        
        /* Loading animation */
        .loader {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 3px solid #6a11cb;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Checkbox styling */
        input[type="checkbox"] {
            accent-color: #6a11cb;
        }
        
        /* Range slider styling */
        input[type="range"] {
            accent-color: #6a11cb;
        }
    </style>
</head>
<body class="gradient-bg text-gray-800 font-sans">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header -->
        <header class="text-center mb-12 animate-fade-in">
            <div class="glass-effect inline-block px-8 py-6 rounded-2xl mb-6 shadow-card">
                <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">
                    <i class="fas fa-qrcode mr-3"></i>Advanced QR Code Generator
                </h1>
                <p class="text-lg text-white/90 max-w-2xl mx-auto">
                    Create customized QR codes for URLs, text, contact info, WiFi credentials, and more with advanced styling options.
                </p>
            </div>
            
            <!-- Stats Bar -->
            <div class="flex flex-wrap justify-center gap-6 mb-8">
                <div class="bg-white/20 backdrop-blur-sm rounded-xl px-6 py-3 text-white">
                    <div class="text-2xl font-bold">4+</div>
                    <div class="text-sm">QR Types</div>
                </div>
                <div class="bg-white/20 backdrop-blur-sm rounded-xl px-6 py-3 text-white">
                    <div class="text-2xl font-bold">12</div>
                    <div class="text-sm">History Slots</div>
                </div>
                <div class="bg-white/20 backdrop-blur-sm rounded-xl px-6 py-3 text-white">
                    <div class="text-2xl font-bold">100%</div>
                    <div class="text-sm">Customizable</div>
                </div>
                <div class="bg-white/20 backdrop-blur-sm rounded-xl px-6 py-3 text-white">
                    <div class="text-2xl font-bold">Free</div>
                    <div class="text-sm">To Use</div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
            <!-- Settings Panel -->
            <div class="bg-white rounded-2xl shadow-card p-6 animate-slide-up">
                <div class="flex items-center mb-6">
                    <div class="w-3 h-8 bg-gradient-to-b from-primary-start to-primary-end rounded-full mr-3"></div>
                    <h2 class="text-2xl font-bold text-gray-800">QR Code Settings</h2>
                </div>
                
                <!-- QR Type Selection -->
                <div class="mb-8">
                    <h3 class="text-lg font-semibold mb-4 text-gray-700">QR Code Type</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                        <button id="type-text" onclick="selectType('text')" class="qr-type-btn bg-gradient-to-r from-primary-start to-primary-end text-white py-4 rounded-xl flex flex-col items-center justify-center transition-all duration-300 hover:shadow-card-hover active:scale-95">
                            <i class="fas fa-font text-2xl mb-2"></i>
                            <span>Text/URL</span>
                        </button>
                        <button id="type-wifi" onclick="selectType('wifi')" class="qr-type-btn bg-gray-100 text-gray-700 py-4 rounded-xl flex flex-col items-center justify-center transition-all duration-300 hover:shadow-card-hover active:scale-95">
                            <i class="fas fa-wifi text-2xl mb-2"></i>
                            <span>WiFi</span>
                        </button>
                        <button id="type-contact" onclick="selectType('contact')" class="qr-type-btn bg-gray-100 text-gray-700 py-4 rounded-xl flex flex-col items-center justify-center transition-all duration-300 hover:shadow-card-hover active:scale-95">
                            <i class="fas fa-address-card text-2xl mb-2"></i>
                            <span>Contact</span>
                        </button>
                        <button id="type-email" onclick="selectType('email')" class="qr-type-btn bg-gray-100 text-gray-700 py-4 rounded-xl flex flex-col items-center justify-center transition-all duration-300 hover:shadow-card-hover active:scale-95">
                            <i class="fas fa-envelope text-2xl mb-2"></i>
                            <span>Email</span>
                        </button>
                    </div>
                </div>
                
                <!-- Content Inputs -->
                <div id="text-input" class="mb-6">
                    <h3 class="text-lg font-semibold mb-3 text-gray-700">Content</h3>
                    <div class="relative">
                        <i class="fas fa-pencil-alt absolute left-4 top-4 text-gray-400"></i>
                        <input type="text" id="content" placeholder="Enter text or URL here..." class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-start focus:ring-2 focus:ring-primary-start/30 outline-none transition-all duration-300">
                    </div>
                </div>
                
                <!-- WiFi Inputs -->
                <div id="wifi-input" class="mb-6 hidden">
                    <h3 class="text-lg font-semibold mb-3 text-gray-700">WiFi Details</h3>
                    <div class="space-y-4">
                        <div class="relative">
                            <i class="fas fa-wifi absolute left-4 top-4 text-gray-400"></i>
                            <input type="text" id="wifi-ssid" placeholder="Network name (SSID)" class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-start focus:ring-2 focus:ring-primary-start/30 outline-none transition-all duration-300">
                        </div>
                        <div class="relative">
                            <i class="fas fa-key absolute left-4 top-4 text-gray-400"></i>
                            <input type="text" id="wifi-password" placeholder="Network password" class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-start focus:ring-2 focus:ring-primary-start/30 outline-none transition-all duration-300">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2 text-gray-700">Encryption Type</label>
                            <select id="wifi-type" class="w-full py-3 px-4 border-2 border-gray-200 rounded-xl focus:border-primary-start focus:ring-2 focus:ring-primary-start/30 outline-none transition-all duration-300">
                                <option value="WPA">WPA/WPA2</option>
                                <option value="WEP">WEP</option>
                                <option value="nopass">No Encryption</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Contact Inputs -->
                <div id="contact-input" class="mb-6 hidden">
                    <h3 class="text-lg font-semibold mb-3 text-gray-700">Contact Details</h3>
                    <div class="space-y-4">
                        <div class="relative">
                            <i class="fas fa-user absolute left-4 top-4 text-gray-400"></i>
                            <input type="text" id="contact-name" placeholder="Full name" class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-start focus:ring-2 focus:ring-primary-start/30 outline-none transition-all duration-300">
                        </div>
                        <div class="relative">
                            <i class="fas fa-phone absolute left-4 top-4 text-gray-400"></i>
                            <input type="text" id="contact-phone" placeholder="Phone number" class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-start focus:ring-2 focus:ring-primary-start/30 outline-none transition-all duration-300">
                        </div>
                        <div class="relative">
                            <i class="fas fa-envelope absolute left-4 top-4 text-gray-400"></i>
                            <input type="text" id="contact-email" placeholder="Email address" class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-start focus:ring-2 focus:ring-primary-start/30 outline-none transition-all duration-300">
                        </div>
                    </div>
                </div>
                
                <!-- Email Inputs -->
                <div id="email-input" class="mb-6 hidden">
                    <h3 class="text-lg font-semibold mb-3 text-gray-700">Email Details</h3>
                    <div class="space-y-4">
                        <div class="relative">
                            <i class="fas fa-at absolute left-4 top-4 text-gray-400"></i>
                            <input type="text" id="email-to" placeholder="recipient@example.com" class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-start focus:ring-2 focus:ring-primary-start/30 outline-none transition-all duration-300">
                        </div>
                        <div class="relative">
                            <i class="fas fa-heading absolute left-4 top-4 text-gray-400"></i>
                            <input type="text" id="email-subject" placeholder="Email subject" class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-start focus:ring-2 focus:ring-primary-start/30 outline-none transition-all duration-300">
                        </div>
                        <div class="relative">
                            <i class="fas fa-align-left absolute left-4 top-4 text-gray-400"></i>
                            <input type="text" id="email-body" placeholder="Email message" class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-start focus:ring-2 focus:ring-primary-start/30 outline-none transition-all duration-300">
                        </div>
                    </div>
                </div>
                
                <!-- Customization Options -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <!-- Size Slider -->
                    <div>
                        <h3 class="text-lg font-semibold mb-3 text-gray-700">QR Code Size</h3>
                        <div class="bg-gray-50 p-4 rounded-xl">
                            <div class="flex justify-between mb-2">
                                <span class="text-sm font-medium text-gray-600">Size:</span>
                                <span id="sizeValue" class="font-bold text-primary-start">300px</span>
                            </div>
                            <input type="range" id="size" min="100" max="500" value="300" step="10" class="w-full h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer">
                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                <span>Small</span>
                                <span>Medium</span>
                                <span>Large</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Color Selection -->
                    <div>
                        <h3 class="text-lg font-semibold mb-3 text-gray-700">Colors</h3>
                        <div class="grid grid-cols-4 gap-2">
                            <button onclick="selectColor('#000000')" class="color-option bg-black text-white py-3 rounded-lg flex items-center justify-center transition-all duration-300 hover:scale-105 active:scale-95 border-2 border-black">
                                <i class="fas fa-check mr-2"></i>Dark
                            </button>
                            <button onclick="selectColor('#6a11cb')" class="color-option bg-gradient-to-r from-primary-start to-primary-end text-white py-3 rounded-lg flex items-center justify-center transition-all duration-300 hover:scale-105 active:scale-95 border-2 border-gray-300">
                                Primary
                            </button>
                            <button onclick="selectColor('#2575fc')" class="color-option bg-primary-end text-white py-3 rounded-lg flex items-center justify-center transition-all duration-300 hover:scale-105 active:scale-95 border-2 border-gray-300">
                                Secondary
                            </button>
                            <button onclick="selectColor('#e74c3c')" class="color-option bg-accent text-white py-3 rounded-lg flex items-center justify-center transition-all duration-300 hover:scale-105 active:scale-95 border-2 border-gray-300">
                                Accent
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Options -->
                <div class="mb-8">
                    <h3 class="text-lg font-semibold mb-3 text-gray-700">Options</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <label class="flex items-center space-x-3 p-3 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition-colors">
                            <input type="checkbox" id="logo" checked class="w-5 h-5 rounded">
                            <span class="text-gray-700 font-medium">Add Logo</span>
                        </label>
                        <label class="flex items-center space-x-3 p-3 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition-colors">
                            <input type="checkbox" id="rounded" checked class="w-5 h-5 rounded">
                            <span class="text-gray-700 font-medium">Rounded Corners</span>
                        </label>
                        <label class="flex items-center space-x-3 p-3 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition-colors">
                            <input type="checkbox" id="gradient" checked class="w-5 h-5 rounded">
                            <span class="text-gray-700 font-medium">Gradient Effect</span>
                        </label>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="flex flex-col sm:flex-row gap-4">
                    <button onclick="generateQRCode()" class="flex-1 bg-gradient-to-r from-primary-start to-primary-end text-white font-bold py-4 rounded-xl flex items-center justify-center gap-3 transition-all duration-300 hover:shadow-card-hover hover:-translate-y-1 active:translate-y-0">
                        <i class="fas fa-bolt"></i> Generate QR Code
                    </button>
                    <button onclick="resetForm()" class="flex-1 bg-gray-100 text-gray-800 font-bold py-4 rounded-xl flex items-center justify-center gap-3 transition-all duration-300 hover:bg-gray-200 active:bg-gray-300">
                        <i class="fas fa-redo"></i> Reset All
                    </button>
                </div>
            </div>
            
            <!-- Preview Panel -->
            <div class="bg-white rounded-2xl shadow-card p-6 animate-slide-up">
                <div class="flex items-center mb-6">
                    <div class="w-3 h-8 bg-gradient-to-b from-primary-start to-primary-end rounded-full mr-3"></div>
                    <h2 class="text-2xl font-bold text-gray-800">QR Code Preview</h2>
                </div>
                
                <!-- QR Code Display -->
                <div class="qr-code-container bg-gradient-to-br from-gray-50 to-gray-100 p-8 rounded-2xl flex flex-col items-center justify-center min-h-[400px] mb-8 shadow-inner-light">
                    <div id="qrcode" class="w-full flex items-center justify-center">
                        <div class="text-center p-8">
                            <div class="loader mx-auto mb-4"></div>
                            <p class="text-gray-500 font-medium">Your QR code will appear here</p>
                            <p class="text-sm text-gray-400 mt-2">Customize settings and click "Generate"</p>
                        </div>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button onclick="downloadQRCode()" class="bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold py-4 rounded-xl flex items-center justify-center gap-3 transition-all duration-300 hover:shadow-card-hover hover:-translate-y-1 active:translate-y-0">
                        <i class="fas fa-download"></i> Download PNG
                    </button>
                    <button onclick="shareQRCode()" class="bg-gradient-to-r from-blue-500 to-cyan-600 text-white font-bold py-4 rounded-xl flex items-center justify-center gap-3 transition-all duration-300 hover:shadow-card-hover hover:-translate-y-1 active:translate-y-0">
                        <i class="fas fa-share-alt"></i> Share QR Code
                    </button>
                </div>
                
                <!-- Quick Tips -->
                <div class="mt-8 pt-6 border-t border-gray-200">
                    <h3 class="text-lg font-semibold mb-3 text-gray-700 flex items-center">
                        <i class="fas fa-lightbulb text-yellow-500 mr-2"></i> Quick Tips
                    </h3>
                    <ul class="space-y-2 text-gray-600">
                        <li class="flex items-start">
                            <i class="fas fa-check text-green-500 mt-1 mr-2 text-sm"></i>
                            <span>For best results, use high contrast colors</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-green-500 mt-1 mr-2 text-sm"></i>
                            <span>Test your QR code with multiple scanners</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-green-500 mt-1 mr-2 text-sm"></i>
                            <span>Keep QR codes simple for better scanning</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- History Section -->
        <div class="bg-white rounded-2xl shadow-card p-6 mb-12">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center">
                    <div class="w-3 h-8 bg-gradient-to-b from-primary-start to-primary-end rounded-full mr-3"></div>
                    <h2 class="text-2xl font-bold text-gray-800">Recently Generated QR Codes</h2>
                </div>
                <button onclick="clearHistory()" class="text-sm bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 px-4 rounded-xl transition-colors">
                    <i class="fas fa-trash-alt mr-2"></i>Clear History
                </button>
            </div>
            
            <div id="history" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">
                <!-- History items will be added here -->
                <div class="col-span-full text-center py-8 text-gray-500">
                    <i class="fas fa-history text-4xl mb-4 text-gray-300"></i>
                    <p class="font-medium">No QR codes generated yet</p>
                    <p class="text-sm">Your generated QR codes will appear here</p>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="text-center text-white/80">
            <div class="glass-effect inline-block px-6 py-4 rounded-xl">
                <p class="text-lg">
                    <i class="fas fa-heart text-accent mr-2"></i>Advanced QR Code Generator 2025
                </p>
                <p class="text-sm mt-2">Made with Tailwind CSS & QRCode.js</p>
            </div>
        </footer>
    </div>

    <!-- QR Code Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    
    <!-- Main JavaScript -->
    <script>
        // Global variables
        let currentQRCode = null;
        let currentColor = '#000000';
        let currentType = 'text';
        let history = JSON.parse(localStorage.getItem('qrHistory')) || [];
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            updateSizeValue();
            loadHistory();
            
            // Add event listeners
            document.getElementById('size').addEventListener('input', updateSizeValue);
            
            // Enter key support
            document.getElementById('content').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') generateQRCode();
            });
            
            // Mark text type as active initially
            document.getElementById('type-text').classList.add('border-2', 'border-primary-start');
        });
        
        // Update size value display
        function updateSizeValue() {
            const size = document.getElementById('size').value;
            document.getElementById('sizeValue').textContent = `${size}px`;
        }
        
        // Select QR code type
        function selectType(type) {
            currentType = type;
            
            // Update active type button
            document.querySelectorAll('.qr-type-btn').forEach(btn => {
                btn.classList.remove('bg-gradient-to-r', 'from-primary-start', 'to-primary-end', 'text-white');
                btn.classList.add('bg-gray-100', 'text-gray-700');
                btn.classList.remove('border-2', 'border-primary-start');
            });
            
            const activeBtn = document.getElementById(`type-${type}`);
            activeBtn.classList.remove('bg-gray-100', 'text-gray-700');
            activeBtn.classList.add('bg-gradient-to-r', 'from-primary-start', 'to-primary-end', 'text-white', 'border-2', 'border-primary-start');
            
            // Show/hide input fields
            document.getElementById('text-input').classList.toggle('hidden', type !== 'text');
            document.getElementById('wifi-input').classList.toggle('hidden', type !== 'wifi');
            document.getElementById('contact-input').classList.toggle('hidden', type !== 'contact');
            document.getElementById('email-input').classList.toggle('hidden', type !== 'email');
        }
        
        // Select color
        function selectColor(color) {
            currentColor = color;
            
            // Update active color button
            document.querySelectorAll('.color-option').forEach(btn => {
                btn.classList.remove('border-2', 'border-black');
                btn.classList.add('border-2', 'border-gray-300');
                const icon = btn.querySelector('i');
                if (icon) icon.classList.add('hidden');
            });
            
            const activeColorBtn = event.currentTarget;
            activeColorBtn.classList.remove('border-2', 'border-gray-300');
            activeColorBtn.classList.add('border-2', 'border-black');
            
            // Show check icon on selected color
            const icon = activeColorBtn.querySelector('i');
            if (icon) icon.classList.remove('hidden');
        }
        
        // Generate QR code
        function generateQRCode() {
            let content = '';
            let description = '';
            
            // Get content based on type
            switch(currentType) {
                case 'text':
                    content = document.getElementById('content').value;
                    description = content.substring(0, 20) + (content.length > 20 ? '...' : '');
                    break;
                    
                case 'wifi':
                    const ssid = document.getElementById('wifi-ssid').value;
                    const password = document.getElementById('wifi-password').value;
                    const encryption = document.getElementById('wifi-type').value;
                    
                    if (!ssid) {
                        showAlert('Please enter a WiFi SSID', 'warning');
                        return;
                    }
                    
                    content = `WIFI:S:${ssid};T:${encryption};P:${password};;`;
                    description = `WiFi: ${ssid}`;
                    break;
                    
                case 'contact':
                    const name = document.getElementById('contact-name').value;
                    const phone = document.getElementById('contact-phone').value;
                    const email = document.getElementById('contact-email').value;
                    
                    if (!name) {
                        showAlert('Please enter a contact name', 'warning');
                        return;
                    }
                    
                    content = `MECARD:N:${name};TEL:${phone};EMAIL:${email};;`;
                    description = `Contact: ${name}`;
                    break;
                    
                case 'email':
                    const to = document.getElementById('email-to').value;
                    const subject = document.getElementById('email-subject').value;
                    const body = document.getElementById('email-body').value;
                    
                    if (!to) {
                        showAlert('Please enter a recipient email', 'warning');
                        return;
                    }
                    
                    content = `mailto:${to}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
                    description = `Email: ${to}`;
                    break;
            }
            
            if (!content) {
                showAlert('Please enter some content to generate a QR code', 'warning');
                return;
            }
            
            // Show loading state
            const qrcodeElement = document.getElementById('qrcode');
            qrcodeElement.innerHTML = `
                <div class="text-center p-8">
                    <div class="loader mx-auto mb-4"></div>
                    <p class="text-gray-500 font-medium">Generating QR Code...</p>
                </div>
            `;
            
            // Clear previous QR code
            if (currentQRCode) {
                currentQRCode.clear();
            }
            
            // Get options
            const size = parseInt(document.getElementById('size').value);
            const addLogo = document.getElementById('logo').checked;
            const rounded = document.getElementById('rounded').checked;
            const gradient = document.getElementById('gradient').checked;
            
            // Create QR code with a slight delay for UX
            setTimeout(() => {
                currentQRCode = new QRCode(qrcodeElement, {
                    text: content,
                    width: size,
                    height: size,
                    colorDark: currentColor,
                    colorLight: "#ffffff",
                    correctLevel: QRCode.CorrectLevel.H
                });
                
                // Apply styling after a short delay to ensure QR code is rendered
                setTimeout(() => {
                    const qrCanvas = document.querySelector('#qrcode canvas');
                    if (!qrCanvas) return;
                    
                    const ctx = qrCanvas.getContext('2d');
                    
                    // Apply rounded corners
                    if (rounded) {
                        qrCanvas.style.borderRadius = '12px';
                    }
                    
                    // Apply gradient effect
                    if (gradient) {
                        // Create gradient
                        const gradientEffect = ctx.createLinearGradient(0, 0, qrCanvas.width, qrCanvas.height);
                        gradientEffect.addColorStop(0, currentColor);
                        
                        // Determine end color based on current color
                        let endColor;
                        if (currentColor === '#000000') {
                            endColor = '#333333';
                        } else if (currentColor === '#6a11cb') {
                            endColor = '#2575fc';
                        } else if (currentColor === '#2575fc') {
                            endColor = '#6a11cb';
                        } else if (currentColor === '#e74c3c') {
                            endColor = '#ff6b6b';
                        } else {
                            endColor = currentColor;
                        }
                        
                        gradientEffect.addColorStop(1, endColor);
                        
                        // Apply gradient to QR code
                        ctx.globalCompositeOperation = 'source-in';
                        ctx.fillStyle = gradientEffect;
                        ctx.fillRect(0, 0, qrCanvas.width, qrCanvas.height);
                        ctx.globalCompositeOperation = 'source-over';
                    }
                    
                    // Add logo
                    if (addLogo) {
                        const logoSize = size / 5;
                        const logoX = (size - logoSize) / 2;
                        const logoY = (size - logoSize) / 2;
                        
                        // Create a simple logo (letter Q in a circle)
                        ctx.fillStyle = currentColor;
                        ctx.beginPath();
                        ctx.arc(size/2, size/2, logoSize/2, 0, Math.PI * 2);
                        ctx.fill();
                        
                        ctx.fillStyle = '#ffffff';
                        ctx.font = `bold ${logoSize * 0.6}px Arial`;
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'middle';
                        ctx.fillText('Q', size/2, size/2);
                    }
                    
                    // Add pulse animation to QR code
                    qrCanvas.classList.add('animate-pulse-glow');
                    
                }, 100);
                
                // Add to history
                addToHistory(content, description);
                
                // Show success message
                showAlert('QR code generated successfully!', 'success');
                
            }, 500);
        }
        
        // Download QR code
        function downloadQRCode() {
            const canvas = document.querySelector('#qrcode canvas');
            
            if (!canvas) {
                showAlert('Please generate a QR code first', 'warning');
                return;
            }
            
            const link = document.createElement('a');
            const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
            link.download = `qr-code-${timestamp}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
            
            showAlert('QR code downloaded successfully!', 'success');
        }
        
        // Share QR code
        function shareQRCode() {
            const canvas = document.querySelector('#qrcode canvas');
            
            if (!canvas) {
                showAlert('Please generate a QR code first', 'warning');
                return;
            }
            
            if (navigator.share) {
                canvas.toBlob(blob => {
                    const file = new File([blob], 'qr-code.png', { type: 'image/png' });
                    
                    navigator.share({
                        title: 'My QR Code',
                        text: 'Check out this QR code I generated!',
                        files: [file]
                    })
                    .then(() => showAlert('QR code shared successfully!', 'success'))
                    .catch(error => {
                        if (error.name !== 'AbortError') {
                            showAlert('Unable to share QR code', 'error');
                        }
                    });
                });
            } else {
                // Fallback: copy to clipboard
                canvas.toBlob(blob => {
                    const item = new ClipboardItem({ 'image/png': blob });
                    navigator.clipboard.write([item])
                        .then(() => showAlert('QR code copied to clipboard!', 'success'))
                        .catch(() => showAlert('Unable to copy QR code to clipboard', 'error'));
                });
            }
        }
        
        // Reset form
        function resetForm() {
            document.getElementById('content').value = '';
            document.getElementById('wifi-ssid').value = '';
            document.getElementById('wifi-password').value = '';
            document.getElementById('contact-name').value = '';
            document.getElementById('contact-phone').value = '';
            document.getElementById('contact-email').value = '';
            document.getElementById('email-to').value = '';
            document.getElementById('email-subject').value = '';
            document.getElementById('email-body').value = '';
            
            document.getElementById('size').value = 300;
            updateSizeValue();
            
            document.getElementById('qrcode').innerHTML = `
                <div class="text-center p-8">
                    <div class="loader mx-auto mb-4"></div>
                    <p class="text-gray-500 font-medium">Your QR code will appear here</p>
                    <p class="text-sm text-gray-400 mt-2">Customize settings and click "Generate"</p>
                </div>
            `;
            
            // Reset color selection
            selectColor('#000000');
            
            // Reset type selection
            selectType('text');
            
            currentQRCode = null;
            
            showAlert('Form reset successfully', 'info');
        }
        
        // Clear history
        function clearHistory() {
            history = [];
            localStorage.setItem('qrHistory', JSON.stringify(history));
            loadHistory();
            showAlert('History cleared successfully', 'info');
        }
        
        // Add to history
        function addToHistory(content, description) {
            const canvas = document.querySelector('#qrcode canvas');
            
            if (!canvas) return;
            
            const dataUrl = canvas.toDataURL('image/png');
            
            const historyItem = {
                id: Date.now(),
                type: currentType,
                content: content,
                description: description,
                dataUrl: dataUrl,
                timestamp: new Date().toLocaleString()
            };
            
            // Add to beginning of history array
            history.unshift(historyItem);
            
            // Keep only last 12 items
            if (history.length > 12) {
                history = history.slice(0, 12);
            }
            
            // Save to localStorage
            localStorage.setItem('qrHistory', JSON.stringify(history));
            
            // Update history display
            loadHistory();
        }
        
        // Load history
        function loadHistory() {
            const historyGrid = document.getElementById('history');
            historyGrid.innerHTML = '';
            
            if (history.length === 0) {
                historyGrid.innerHTML = `
                    <div class="col-span-full text-center py-8 text-gray-500">
                        <i class="fas fa-history text-4xl mb-4 text-gray-300"></i>
                        <p class="font-medium">No QR codes generated yet</p>
                        <p class="text-sm">Your generated QR codes will appear here</p>
                    </div>
                `;
                return;
            }
            
            history.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item bg-gray-50 rounded-xl p-3 flex flex-col items-center cursor-pointer transition-all duration-300 hover:bg-gray-100 hover:shadow-card-hover hover:-translate-y-1';
                historyItem.innerHTML = `
                    <img src="${item.dataUrl}" alt="QR Code" class="w-full h-32 object-contain mb-2 rounded-lg">
                    <p class="text-xs font-medium text-gray-700 text-center truncate w-full">${item.description}</p>
                    <p class="text-xs text-gray-500 mt-1">${item.type}</p>
                `;
                
                historyItem.addEventListener('click', () => {
                    // Load this QR code into the preview
                    document.getElementById('qrcode').innerHTML = `<img src="${item.dataUrl}" alt="QR Code" class="rounded-lg">`;
                    showAlert('QR code loaded from history', 'info');
                });
                
                historyGrid.appendChild(historyItem);
            });
        }
        
        // Show alert message
        function showAlert(message, type = 'info') {
            // Remove any existing alert
            const existingAlert = document.querySelector('.alert-message');
            if (existingAlert) existingAlert.remove();
            
            // Create alert element
            const alert = document.createElement('div');
            alert.className = `alert-message fixed top-6 right-6 z-50 px-6 py-4 rounded-xl shadow-card text-white font-medium animate-slide-up ${getAlertColor(type)}`;
            alert.innerHTML = `
                <div class="flex items-center">
                    <i class="fas ${getAlertIcon(type)} mr-3"></i>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(alert);
            
            // Auto remove after 3 seconds
            setTimeout(() => {
                alert.classList.add('opacity-0', 'transition-opacity', 'duration-300');
                setTimeout(() => alert.remove(), 300);
            }, 3000);
        }
        
        // Get alert color based on type
        function getAlertColor(type) {
            switch(type) {
                case 'success': return 'bg-gradient-to-r from-green-500 to-emerald-600';
                case 'warning': return 'bg-gradient-to-r from-yellow-500 to-amber-600';
                case 'error': return 'bg-gradient-to-r from-red-500 to-rose-600';
                default: return 'bg-gradient-to-r from-blue-500 to-cyan-600';
            }
        }
        
        // Get alert icon based on type
        function getAlertIcon(type) {
            switch(type) {
                case 'success': return 'fa-check-circle';
                case 'warning': return 'fa-exclamation-triangle';
                case 'error': return 'fa-times-circle';
                default: return 'fa-info-circle';
            }
        }
    </script>
</body>
</html>
